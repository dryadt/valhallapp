<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Starless</title>
    <link rel="icon" href="https://cdn.discordapp.com/emojis/750294190067286047.png?v=1">
    <link rel="stylesheet" href="mystyle.css">
</head>
<body>
    <!-- The Modal -->
    <div id="myModal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="img01" style="font-size:200%;">
        <div id="caption"></div>
    </div>
    <script type="text/javascript">
        // Get the modal
        var modal = document.getElementById("myModal");
        var isPageLoaded = true;
        // Get the image and insert it inside the modal - use its "alt" text as a caption
        var imgList = document.getElementsByTagName("dropdownImage");
        var modalImg = document.getElementById("img01");
        var captionText = document.getElementById("caption");
        let imageUrl = [
            { credit: 0, url: 'https://cdn.discordapp.com/attachments/575393068065226782/666199147782733846/Dryad.png' },
            { credit: 0, url: 'https://media.discordapp.net/attachments/482894390570909706/695172636258336809/Untitled421_20200402152414.png?width=300&height=300' },
            { credit: 0, url: 'https://cdn.discordapp.com/attachments/482894390570909706/702707248811606026/femboyyyyy.png' },
            { credit: 1, url: 'https://media.discordapp.net/attachments/467635425553547307/720005811602063452/Starless.png?width=225&height=300' },
            { credit: 2, url: 'https://cdn.discordapp.com/attachments/482894390570909706/742330962423185469/starless-1.png' },
            { credit: 3, url: 'https://media.discordapp.net/attachments/601614220575899648/733139015825489940/calebhug.png' },
            { credit: 3, url: 'https://media.discordapp.net/attachments/601614220575899648/733139013371953240/calebboop.png' },
            { credit: 4, url: 'https://cdn.discordapp.com/attachments/482894390570909706/751013108142702652/unknown.png' },
            { credit: 0, url: 'https://cdn.discordapp.com/attachments/561322361878609944/758667197165600788/Untitled1080_20200924203127.png' },
            { credit: 0, url: 'https://cdn.discordapp.com/attachments/482894390570909706/767748604689383464/Untitled1131_20201019215438_1.jpg' },
            { credit: 3, url: 'https://cdn.discordapp.com/attachments/577586063967518826/769582547604340747/unknown-71.png' },
            { credit: 3, url: 'https://cdn.discordapp.com/attachments/598604322623848458/689494198591946874/dryadnuzzles.png' },
            { credit: 0, url: 'https://cdn.discordapp.com/attachments/577586063967518826/780774843330199612/unknown.png' },
            { credit: 0, url: 'https://media.discordapp.net/attachments/658791767168122923/775336227943612436/Untitled1215_20201109202914.png?width=349&height=330' },
            { credit: 0, url: 'https://cdn.discordapp.com/attachments/663505369313706004/780106277056413706/Untitled.png' },
            { credit: 0, url: 'https://cdn.discordapp.com/attachments/577586063967518826/796805585126948864/skirt.png' },
            { credit: 0, url: 'https://cdn.discordapp.com/attachments/658791767168122923/780704114979635231/Untitled1264_20201124155900.png' },
            { credit: 0, url: 'https://cdn.discordapp.com/attachments/577586063967518826/796802169704939591/toilet.png' },
            { credit: 5, url: 'https://cdn.discordapp.com/attachments/482894390570909706/786159395959734282/image1.png' },
            { credit: 0, url: 'https://cdn.discordapp.com/attachments/577586063967518826/796801582628077618/Untitled.png' },
            { credit: 7, url: 'https://cdn.discordapp.com/attachments/577586063967518826/787819431463747645/starless_black.png' },
            { credit: 0, url: 'https://cdn.discordapp.com/attachments/561322361878609944/788311403306942514/Untitled1355_20201215154733.png' },
            { credit: 2, url: 'https://cdn.discordapp.com/attachments/718478016241467453/791583295372394556/bgtest.png' },
            { credit: 6, url: 'https://cdn.discordapp.com/attachments/482894390570909706/791966004607582228/Cukier49_-_Antares_and_Starless.png' },
            { credit: 0, url: 'https://cdn.discordapp.com/attachments/577586063967518826/796450113416724490/Untitled.png' },
            { credit: 0, url: 'https://cdn.discordapp.com/attachments/577586063967518826/796450434788622376/Untitled.png' },
        ]


        let artistList = [
            "Art by: <a href='https://twitter.com/sc_astral'>Astral</a>",
            "Art by: <a href='https://twitter.com/RockAddictGlum'>Glum</a>",
            "Art by: <a href='https://twitter.com/Spaztiqe'>Spaz</a>",
            "Art by: Meg",
            "Art by: Mewdusa",
            "Art by: Ollie",
            "Art by: Cukier",
            "Art by: <a href='https://twitter.com/JumpMere'>Mere</a>",
        ]

        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];

        // When the user clicks on <span> (x), close the modal
        span.onclick = function () {
            modal.style.display = "none";
        }
        document.addEventListener('keyup', function (e) {
            if (e.keyCode == 27) {
                modal.style.display = "none";
            }
        });
        //-- js image dropdown --
        window.onload = initCommand;
        function initCommand() {
            setInterval(generateImage, 1000);
        }

        var explIndex = 0;
        const maxExplIndex = 20;

        function generateImage() {
            if (isPageLoaded == false) return
            var x = document.createElement("IMG");
            let randomImageID = Math.floor(Math.random() * imageUrl.length);
            x.setAttribute("src", imageUrl[randomImageID].url);
            x.setAttribute("width", "20%");
            x.setAttribute("class", "dropdownImage");
            x.setAttribute("style", `margin-left: ${Math.floor(Math.random() * 100)}%`);
            //left click
            x.onclick = function () {
                modal.style.display = "block";
                modalImg.src = this.src;
                captionText.innerHTML = artistList[imageUrl[randomImageID].credit];
            }
            //right click
            x.addEventListener('contextmenu', function (ev) {
                console.log(ev);
                ev.target.setAttribute("src", `asset/expl${explIndex}.gif`); //use explosion gif
                if (explIndex == maxExplIndex) //check if it is the last one
                    explIndex = 0; //if yes, set back to 0
                else
                    explIndex++; //else increment
                //requires expl1.gif, expl2.gif, expl3.gif, expl4.gif, expl5.gif and expl6.gif in same folder as html as is, can also use an array of explosion gif urls
                //also requires a variable explIndex to be declared with the other vars (same level as art array) and a const maxExplIndex that is the same as the length
                //if using an array, could be changed for arr.length instead
                setTimeout(() => x.remove(), 1000); //changed ev.remove() to () => x.remove()
                return false;
            }, { once: true });
            document.body.appendChild(x);
            setTimeout(() => x.remove(), 20000); //same thing here as above
        }

        // removes rightclick
        document.addEventListener('contextmenu', function (e) {
            e.preventDefault();
        });
        // -- test if page is loaded --
        function handleVisibilityChange() {
            if (document.hidden) {
                isPageLoaded = false;
            } else {
                isPageLoaded = true;
            }
        }

        document.addEventListener("visibilitychange", handleVisibilityChange, false);
    </script>
</body>
</html>